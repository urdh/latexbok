\ifdefined\latexbokFontdir\else\def\latexbokFontdir{../../fonts}\fi
\ifdefined\latexbokFiguredir\else\def\latexbokFiguredir{../../examples}\fi
\documentclass[10pt,../../a4.tex]{subfiles}
\begin{document}
\chapter{Matematik med \hologo{LaTeX} och \texorpdfstring{\AmS}{AMS}}\label{sec:3}
\LaTeX{} är ett mycket bra system för typsättning, och ett av de områden
\LaTeX{} är starkast inom är typsättning av matematik. För att utöka och
förenkla de grundläggande mekanismer \LaTeX{} har för typsättning av 
matematik har \textit{American Mathematical Society}, \AmS, skapat ett 
antal paket (främst \pack{amsmath} och \pack{amssymb}) som kollektivt 
refereras till som \AmS\LaTeX{} och som gör typsättning av matematik med 
\LaTeX{} mycket bättre.

Dessa paket är dock enorma, och det finns hela böcker tillägnade endast
typsättning av matematik i \LaTeX{} \parencite[till exempel][som för övrigt är en 
mycket bra referens att ha till hands när man typsätter matematik i 
\LaTeX]{Voss10}.
Den här delen kommer att ge en kort introduktion till de allra enklaste
och vanligaste konstruktionerna man stöter på när man typsätter matematik
i \LaTeX, och tar mycket inspiration från \textcite{Voss10}.

För att typsätta matematik så som det beskrivs i den här delen måste du
använda paketen \pack{amsmath} och \pack{amssymb}, som bör följa med din
\LaTeX-distribution:
\begin{latexcode}
\usepackage{amsmath}
\usepackage{amssymb}
\end{latexcode}

\section{Att visa ekvationer}
Ekvationer är mångfacetterade och man kan vilja inkludera ekvationer av
olika anledningar och på olika sätt. I \LaTeX{} kan figurer infogas
\emph{inline} (det vill säga i löpande text) eller i omgivningar (vilket
frilägger ekvationen, något som är lämpligt för längre ekvationer eller
ekvationer av större vikt).

\subsection{Ekvationer i löpande text}
\index{matematikläge!i löpande text}
Ekvationer i löpande text kan infogas på två olika sätt; dels genom att
placera matematiken mellan dollartecken (\verb|$\sin(x)$|) och dels genom
att använda de \LaTeX-specifika alternativen till dollartecken, \cmd{(}
och \cmd{)}. Det rekommenderas att använda det senare, eftersom detta inte
ger fullt så obskyra felmeddelanden när saker är fel, men även
dollatecknen fungerar bra och det är ingen typografisk skillnad.

Matematik som typsätts i löpande text kommer att anpassas i höjd för att
inte störa texten omkring. Det innebär att till exempel bråk kommer att
se tilltryckta ut. Oftast bör man dock inte använda matematik i löpande
text vid de tillfällen då det kommer se \enquote{fel} ut, eftersom ett block då
är mer logiskt, textmässigt. Matematik i löpande text är istället oftast
konstanter, enstaka värden och kanske någon olikhet.

\subsection{Ekvationer som ekvationer}\label{sec:3:ekvsomekv}
\index{matematikläge!fristående ekvation}
Längre och viktigare ekvationer bör inte typsättas i löpande text —
man bör istället använda en av de många omgivningar (\AmS)\LaTeX{} ger
tillgång till. Den allra enklaste omgivningen (som fungerar i de flesta
fall) är \texttt{equation}, som finns i en vanlig variant som skapar 
en numrerad ekvation samt en stjärnvariant (\texttt{equation*}) som ger en
onumrerad ekvation. Som en tumregel bör man endast använda den numrerade
varianten om man behöver referera till ekvationen, eller om det är en
viktig definition som andra kan tänkas vilja referera till.

Fristående ekvationer kan typsättas mycket bättre eftersom de inte är 
begränsade av omgivande text. Integraler och summor kan göras så höga som
det krävs, och paranteser kan växa nästan obegränsat. Det är dock viktigt
att komma ihåg att en fristående ekvation \emph{oftast} inte ska vara ett 
eget
stycke. \Cref{ex:stycken} på \cpageref*{ex:stycken} visade hur ett antal ekvationer och
mellanrumet mellan dessa och den omgivande texten varierade beroende på
	ekvationens plats i stycket. Trots att ekvationen är \enquote{fristående} bör
	man alltså behandla den precis som en
ekvation i löpande text. Skillnaden är främst typografisk.

\subsection{Referera till ekvationer}
\index{korsreferens!till ekvation}
Likt figurer och tabeller finns det även ett behov av att kunna referera
till sina ekvationer. På samma sätt som för figurer markerar man den
ekvation man vill referera till med hjälp av \cmd{label}, men istället
för att referera med hjälp av \cmd{ref} eller \cmd{vref} bör man använda
\cmd{eqref} för att referera till ekvationer\footnote{Använder man
\pack{cleveref} kan man hålla sig till \cmd{cref}, som sköter det
snyggt ändå.}. Sådana referenser typsätts
lite annorlunda, och bör inte heller föregås av någon text som indikerar
att det är en referens.

\phantomsection\nopagebreak
\section{En snabbkurs i \LaTeX-matematik}
Nu när du vet hur man skapar förutsättningarna för att typsätta matematik
är det dags att gå in på detaljerna. Det finns många konventioner
och betänkligheter när det gäller typsättning av matematik, så det är
svårt att göra något annat än att skrapa på ytan, men sidorna framöver
ämnar presentera tillräckligt mycket för att du ska klara att typsätta
det mesta du stöter på under en typisk kandidatutbildning i Teknisk Fysik
eller Teknisk Matematik.

\label{sec:3:subscript}
\index{superskript}
\index{subskript}
Till att börja med måste två elementära operationer förklaras;
\emph{superskript} (för potenser och dylikt) och \emph{subskript} (för 
index och liknande). Ett superskript inför man i \LaTeX{} med hjälp av
en cirkumflex (\verb|^|); koden \verb|\(e^x\)| producerar alltså \(e^x\).
Ett subskript å andra sidan införs med hjälp av ett understreck (\verb|_|)
på liknande sätt; \verb|\(x_i\)| blir \(x_i\). Notera att dessa tecken
endast påverkar nästa \emph{kommandoföljd}, vilket innebär att man om man
vill upphöja/nedsänka mer än ett tecken (eller kommando), så måste man
omsluta dessa med måsvingar:
\latex|\(x_{i,j}\)|
Detta innebär även att om man vill ha både superskript och subskript efter
en variabel så är det inget problem; man inkluderar bara dessa i följd
direkt efter variabeln (eller operatorn):
\latex|\(x_i^2\)|
Dessa två exempel producerar alltså \(x_{i,j}\) och \(x_i^2\), 
respektive. Det skall även nämnas att man kan sätta sub- och superskript
framför en tom grupp, vilket är användbart om man vill beteckna exempelvis
isotoper: \verb|{}_{92}^{235}|\\\verb|\textrm{U}| kan till exempel beteckna en uranatom
och typsätts \({}_{92}^{235}\textrm{U}\).

\index{tomrum!i matematikläge}
Det finns även några viktiga skillnader mellan matematiktypsättning och
vanlig texttypsättning, som främst har att göra med mellanrum:
\begin{itemize}
	\item Mellanslag i koden ignoreras nästan alltid. De mellanrum som ska
	visas i det typsatta dokumentet placeras istället ut av \LaTeX. Det
	finns även explicita kommandon som gör detta. Detta gör att du kan
	vara liberal med mellanrum i din kod, vilket ökar läsbarheten.
	
	\item Tomma rader tillåts inte i matematiktypsättning. Endast ett
	\enquote{stycke} per ekvationsomgivning får förekomma.
	
	\index{matematik!variabel}
	\index{matematik!icke-kursiv text}
	\item Alla bokstäver anses vara variabler och typsätts därför med
	kursiv text. De bokstäver som inte är variabler (till exempel
	differentieringsoperatorn \(\mathrm{d}\)) måste skrivas in med 
	kommandot \cmd[mathrm]{mathrm\{...\}}. Längre bitar text (eller snarare text
	som egentligen skulle kunna vara brödtext)
	bör skrivas in med kommandot \cmd{text}.
\end{itemize}

\subsection{Enkla konstruktioner} % \frac, \choose, etc.
Det finns ett antal enkla konstruktioner inom matematiken som var man
(och kvinna) bör känna till och kunna typsätta. Dessa är konstruktioner
som bråk, binomialkoefficienter, rötter och så vidare. Dessa visas
kollektivt i \cref{tab:math:enkla}.
\index{matematik!kvadratrot}
\index{matematik!binomialkoefficient}
\index{matematik!bråk}

\begin{table}[p]
	\centering
	\caption{Enkla matematiska konstruktioner i \LaTeX{}.}
	\label{tab:math:enkla}
	\begin{minipage}{0.66\textwidth}
	\centering
	\begin{tabular}{llc}
		\toprule 
		Konstruktion & \LaTeX-kod & Resultat  \\
		\midrule 
		Kvadratrot & \verb|\sqrt{x}| & \(\sqrt{x}\) \\
		\(n\)-rot & \verb|\sqrt[n]{x}| & \(\sqrt[n]{x}\) \\
		Binomialkoefficient & \verb|\binom{n}{k}| & \(\binom{n}{k}\) \\
		Bråk & \verb|\frac{a}{b}| & \(\frac{a}{b}\) \\
		Alternativt bråk\footnote{Med paketet \pack{xfrac}} & \verb|\sfrac{a}{b}| & \(\sfrac{a}{b}\) \\
		\bottomrule 
	\end{tabular}
	\end{minipage}
\end{table}

Ibland kan det även vara önskvärt att markera bitar av ekvationer med små
kommentarer ovan och under matematiken. Detta kan göras med kommandona
\cmd{overbrace} och \cmd{underbrace}, vilket visas i \cref{ex:overbrace}.

\begin{kod}[p]
	\centering
	\begin{minipage}{0.8\textwidth} % kod
		\begin{latexcode}
\begin{equation*}
\underbrace{y'' + 2y' + y}_{\mathrm{D}(y)}
= \overbrace{ax^2+bx+c}^{f(x)}
\end{equation*}
		\end{latexcode}
	\end{minipage}
	\medskip\\
	\begin{minipage}{0.8\textwidth} % figur
		\begin{equation*}
			\underbrace{y'' + 2y' + y}_{\mathrm{D}(y)}
			= \overbrace{ax^2+bx+c}^{f(x)}
		\end{equation*}
	\end{minipage}		
	\caption{Annotering med \cmd{overbrace} och \cmd{underbrace}.}
	\label{ex:overbrace}
\end{kod}

\subsection{Funktioner etc.} % sin, lim, sup, etc.
\index{matematik!trigonometri}
\index{matematik!gränsvärde}
Många välanvända eller kända funktioner och operatorer (trigonometriska 
funktioner och liknande) har
långa namn som bör skrivas i upprätt text (det vill säga med
\cmd{mathrm}), men då detta är både tidskrävande och inelegant ur en 
semantisk synpunkt definierar (\AmS)\LaTeX{} några
av dessa som kommandon istället — sinus blir \cmd{sin}, cosinus \cmd{cos}
och så vidare.

\index{matematik!operator}
De vanligaste trigonometriska funktionerna, logaritmer samt vanliga
operationer så som \(\max\), \(\min\), \(\sup\), \(\inf\) och \(\lim\)
finns som kommandon, och om man behöver typsätta en sådan funktion kan man
oftast satsa på att den finns. Finns den inte så kan man skapa den med
hjälp av kommandot \cmd{DeclareMathOperator}:
\latex|\DeclareMathOperator{gcd} % Största gemensamma nämnare|

\subsection{Symboler}\label{sec:3:symbs}
\index{matematik!symbol}
Matematiken innehåller ett stort antal symboler, däribland det grekiska
alfabetet, talmängder, oändligheter, tomma mängden och så vidare (och då
inkluderar vi inte de pilar, operatorer, hattar och olikhetstecken som
diskuteras senare). Några av dessa symboler listas i
\crefrange{tab:symbs}{tab:grekiska} — notera att några av de 
grekiska bokstäverna inte har några kommandon för versaler, eftersom dessa
är identiska med latinska bokstäver, samt att några har \enquote{varianter} som
ser något annorlunda ut (till exempel \cmd{varepsilon}, som är mer lik
det lilla epsilon man brukar rita för hand än \cmd{epsilon}). Notera även att
de inte typsätts i kursiv stil, vilket oftast är lämpligt. I så fall bör man använda
paketet \pack{fixmath}, som ser till att även de grekiska bokstäverna typsätts
som de variabler de faktiskt brukar vara.

Det är givetvis svårt (en del
skulle säga omöjligt) att hålla reda på motsvarande \LaTeX-kommandon för
alla dessa olika symboler själv, och det kan därför vara bra att ha en
bra referens \parencite[till exempel][]{Pakin09}. Man kan även använda det
utmärkta verktyget Detexify%
\footnote{\url{http://detexify.kirelabs.org/classify.html}}, i vilket man
kan rita sin symbol och få en lista över liknande \LaTeX-symboler och
deras motsvarande kommandon.

\begin{table}[tb!]
	\centering 
	\caption{Diverse användbara symboler i \LaTeX.}
	\label{tab:symbs}
	\begin{tabular}{lcp{0.5\textwidth}}
		\toprule 
		Kommando & & Kommentar \\
		\midrule 
		\cmd{hbar} & \(\hbar\) & Konstant inom kvantfysiken \\
		\cmd{Re} & \(\Re\) & Realdel av komplext tal \\
		\cmd{Im} & \(\Im\) & Imaginärdel av komplext tal \\
		\cmd{aleph} & \(\aleph\) & Beskriver kardinalitet av mängder \\
		\cmd{forall} & \(\forall\) & \\
		\cmd{exists} & \(\exists\) & \\
		\cmd{nexists} & \(\nexists\) & \\
		\cmd{complement} & \(\complement\) & \\
		\cmd{emptyset} & \(\emptyset\) & Tomma mängden; även \cmd{varnothing} (\(\varnothing\)) eller \cmd[mathcal]{mathcal\{O\}} (\(\mathcal{O}\))\\
		\cmd{infty} & \(\infty\) & Oändlighet \\
		\bottomrule 
	\end{tabular}
\end{table}

\begin{table}[p!]
	\centering 
	\caption{Kommandon motsvarande symbolerna i grekiska alfabetet.}
	\vbox to 0.8\textheight{\hbox to \textwidth{\centering% HACK: fit table on one page
	\label{tab:grekiska}
	\begin{tabular}{lclclc}
		\toprule 
		%\multicolumn{2}{c}{\LaTeX-kommando} \\
		%\cmidrule{1-2}
		Gemen & & Versal & & Variant & \\
		\midrule 
		\cmd{alpha} & \(\alpha\) & \cmd[mathrm]{mathrm\{A\}} & \(\mathrm{A}\) & & \\
		\cmd{beta} & \(\beta\) & \cmd[mathrm]{mathrm\{B\}} & \(\mathrm{B}\) & & \\
		\cmd{gamma} & \(\gamma\) & \cmd{Gamma} & \(\Gamma\) & & \\
		\cmd{delta} & \(\delta\) & \cmd{Delta} & \(\Delta\) & &  \\
		\cmd{epsilon} & \(\epsilon\) & \cmd[mathrm]{mathrm\{E\}} & \(\mathrm{E}\) & \cmd{varepsilon} & \(\varepsilon\) \\
		\cmd{zeta} & \(\zeta\) & \cmd[mathrm]{mathrm\{Z\}} & \(\mathrm{Z}\) & & \\
		\cmd{eta} & \(\eta\) & \cmd[mathrm]{mathrm\{H\}} & \(\mathrm{H}\) & & \\
		\cmd{theta} & \(\theta\) & \cmd{Theta} & \(\Theta\) & \cmd{vartheta} & \(\vartheta\) \\
		\cmd{iota} & \(\iota\) & \cmd[mathrm]{mathrm\{I\}} & \(\mathrm{I}\) & & \\
		\cmd{kappa} & \(\kappa\) & \cmd[mathrm]{mathrm\{K\}} & \(\mathrm{K}\) & & \\
		\cmd{lambda} & \(\lambda\) & \cmd{Lambda} & \(\Lambda\) & & \\
		\cmd{mu} & \(\mu\) & \cmd[mathrm]{mathrm\{M\}} & \(\mathrm{M}\) & & \\
		\cmd{nu} & \(\nu\) & \cmd[mathrm]{mathrm\{N\}} & \(\mathrm{N}\) & & \\
		\cmd{xi} & \(\xi\) & \cmd{Xi} & \(\Xi\) & & \\
		\texttt{o} & \(o\) & \cmd[mathrm]{mathrm\{O\}} & \(\mathrm{O}\) & & \\
		\cmd{pi} & \(\pi\) & \cmd{Pi} & \(\Pi\) & \cmd{varpi} & \(\varpi\) \\
		\cmd{rho} & \(\rho\) & \cmd[mathrm]{mathrm\{P\}} & \(\mathrm{P}\) & \cmd{varrho} & \(\varrho\) \\
		\cmd{sigma} & \(\sigma\) & \cmd{Sigma} & \(\Sigma\) & \cmd{varsigma} & \(\varsigma\) \\
		\cmd{tau} & \(\tau\) & \cmd[mathrm]{mathrm\{T\}} & \(\mathrm{T}\) & & \\
		\cmd{upsilon} & \(\upsilon\) & \cmd{Upsilon} & \(\Upsilon\) & & \\
		\cmd{phi} & \(\phi\) & \cmd{Phi} & \(\Phi\) & \cmd{varphi} & \(\varphi\) \\
		\cmd{chi} & \(\chi\) & \cmd[mathrm]{mathrm\{X\}} & \(\mathrm{X}\) & & \\
		\cmd{psi} & \(\psi\) & \cmd{Psi} & \(\Psi\) & & \\
		\cmd{omega} & \(\omega\) & \cmd{Omega} & \(\Omega\) & & \\
		\bottomrule 
	\end{tabular}
	}\hfill\vss}% HACK: fit table on one page
\end{table}

\subsubsection{Operatorer}\label{sec:3:operatorer}%
\index{matematik!operator}
Förutom symbolerna som nyss diskuterades finns även en
mycket stor mängd operatorer inom matematiken. Även dessa kan man leta
fram med hjälp av Detexify, men de flesta (åtminstone de som används
frekvent) har logiska namn; nabla-operatorn (\(\nabla\)) heter till 
exempel
\cmd{nabla}, och tillhörandeoperatorn (\(\in\)) heter \cmd{in}. Listor
över de vanligaste pilarna, relationssymbolerna och operatorerna i 
\LaTeX{} återfinns i \crefrange{tab:pilar}{tab:operatorer}. 
\index{matematik!relationssymbol}
\index{matematik!pil}

\paper{c5}{\vspace*{-0.7\baselineskip}}% HACK(c5): mindre avstånd bättre sidbrytning
\subsubsection{Hattar, prickar, primtecken och liknande}
\paper{c5}{\vspace*{-0.3\baselineskip}}% HACK(c5): mindre avstånd bättre sidbrytning
\index{matematik!hatt}
\index{matematik!derivata}
Ibland vill man även modifiera variablers betydelse, kanske för att
beteckna en transformerad variabel, en vektor 
eller en derivata med avseende på tid.
Detta kan göras med de \LaTeX-kommandon som listas i \cref{tab:hattar},
tillsammans med en kort förklaring av notationens innebörd.

\index{matematik!vektor}
Just för vektorer existerar det dock flera olika notationer. En populär
variant (som \LaTeX{} främjar) är att sätta dit en liten pil ovanför
variabeln (\(\vec{a}\)), vilket görs med \cmd{vec}. Andra föredrar att
skriva variabeln fetstilt eller med krittavletypsnitt,
vilket görs med \cmd{boldmath} och \cmd{mathbb}, respektive.

Min rekommendation är att använda \cmd{vec} (eftersom det i
koden indikerar att vi pratar om en vektor), och omdefiniera den om man
föredrar en annan notation. Man kan till exempel använda följande kommando
för att göra så att \cmd{vec} istället visar variabeln
fetstilt\footnote{Med paketet \pack{isomath} — som kan rekommenderas — kan koden reduceras till \cmd*{let}\cmd*{vec}\cmd*{vectorsym}}:%
\paper{c5}{\nopagebreak}% HACK(c5): Radbryt inte här!
\latex|\renewcommand\vec[1]{\boldmath{#1}}|

\begin{table}[p!]
	\begin{minipage}{\textwidth}
		\centering
		\caption{Hattar och dylikt med \LaTeX-kommandon.}
		\label{tab:hattar}
		\begin{tabular}{lcp{0.5\textwidth}}
			\toprule 
			Notation & & Kommentar \\
			\midrule 
			\cmd[hat]{hat\{a\}} & \(\hat{a}\) & Transformerade variabler \\
			\cmd[vec]{vec\{a\}} & \(\vec{a}\) & Vektorer (alternativ notation existerar) \\
			\cmd[dot]{dot\{a\}} & \(\dot{a}\)& Förstaderviata med avseende på tid\\
			\cmd[ddot]{ddot\{a\}} &\(\ddot{a}\)& Andraderivata med avseende på tid\\
			\texttt{a'} & \(a'\)& Generell förstaderivata\\
			\texttt{a''} & \(a''\)& Generell andraderivata\\
			\cmd[bar]{bar\{a\}} & \(\bar{a}\) & Statistiskt medelvärde \\
			\cmd[tilde]{tilde\{a\}} & \(\tilde{a}\) & Statistisk median \\
			\cmd[widehat]{widehat\{abc\}} & \(\widehat{abc}\) & Variant av \cmd{hat} för flera tecken \\
			\bottomrule 
		\end{tabular}
	\end{minipage}\par\bigskip
	\begin{minipage}{\textwidth}
		\centering 
		\caption{Viktiga pilar i matematisk notation och deras \LaTeX-kommandon.}
		\label{tab:pilar}
		\begin{tabular}{lclc}
			\toprule 
			Kort & & Lång & \\
			\midrule 
			\cmd{gets} & \(\gets\) & \cmd{longleftarrow}&\(\longleftarrow\) \\
			\cmd{to} & \(\to\) & \cmd{longrightarrow}&\(\longrightarrow\) \\ 
			\cmd{leftrightarrow} & \(\leftrightarrow\) & \cmd{longleftrightarrow} & \(\longleftrightarrow\) \\
			\cmd{Leftarrow} & \(\Leftarrow\) & \cmd{Longleftarrow} & \(\Longleftarrow\) \\
			\cmd{Rightarrow} & \(\Rightarrow\) & \cmd{Longrightarrow} & \(\Longrightarrow\) \\
			\cmd{Leftrightarrow} & \(\Leftrightarrow\) & \cmd{iff} & \(\iff\) \\
			\cmd{mapsto} & \(\mapsto\) & \cmd{longmapsto} & \(\longmapsto\) \\
			\bottomrule 
		\end{tabular}
	\end{minipage}
\end{table}

\begin{table}[p!]
	\begin{minipage}{\textwidth}
		\centering 
		\caption{Viktiga relationssymboler och deras \LaTeX-kommandon.}
		\label{tab:relationer}
		\begin{tabular}{lclclc}
			\toprule 
			Mindre & & Större & & Lika & \\
			\midrule 
			\texttt{<} & \(<\) & \texttt{>} & \(>\) & \texttt{=} & \(=\) \\
			\cmd{nless} & \(\nless\) & \cmd{ngtr} & \(\ngtr\) & \cmd{neq} & \(\neq\) \\
			\cmd{leq} & \(\leq\) & \cmd{geq} & \(\geq\) & \cmd{equiv} & \(\equiv\) \\
			\cmd{nleq} & \(\nleq\) & \cmd{ngeq} & \(\ngeq\) & & \\
			\cmd{lesssim} & \(\lesssim\) & \cmd{gtrsim} & \(\gtrsim\) & \cmd{approx} & \(\approx\) \\
			\cmd{ll} & \(\ll\) & \cmd{gg} & \(\gg\) & & \\
			\cmd{subset} & \(\subset\) & \cmd{supset} & \(\supset\) & & \\
			\cmd{subseteq} & \(\subseteq\) & \cmd{supseteq} & \(\supseteq\) & & \\
			\bottomrule
		\end{tabular}
	\end{minipage}\par\bigskip
	\begin{minipage}{\textwidth}
		\centering 
		\caption{Viktiga operatorer och deras \LaTeX-kommandon.}
		\label{tab:operatorer}
		\begin{tabular}{llp{0.5\textwidth}}
			\toprule 
			Operator & & Kommentar \\ 
			\midrule 
			\texttt{+}, \texttt{-} & \(+\), \(-\) & \\
			\cmd{times}, \cmd{div} & \(\times\), \(\div\) & Multiplikation kan även skrivas ut tydligt med \cmd{cdot} (\(\cdot\)); \cmd{times} och \cmd{cdot} har speciella betydelser inom linjär algebra\\
			\cmd{pm}, \cmd{mp} & \(\pm\), \(\mp\) & \\
			\cmd{cup}, \cmd{cap} & \(\cup\), \(\cap\) & Union/snitt i mängdlära \\
			\cmd{lor}, \cmd{land} & \(\lor\), \(\land\) & Och/eller i Boolesk algebra \\
			\cmd{partial} & \(\partial\) & Partiell deriveringsoperator \\
			\cmd{nabla} & \(\nabla\) & Flerdimensionell deriveringsoperator \\
			\cmd{Delta} & \(\Delta\) & Laplaceoperator \\
%			\cmd{mathscr\{F\}} & \(\mathscr{F}\) & Fouriertransform \\
			\bottomrule 
		\end{tabular}
		% \wedge, \cup, \in, \to, \nabla
	\end{minipage}
\end{table}
%% (end)

\paper{a4}{\clearpage}% HACK(a4): rubrik efter figurer
\subsection{Paranteser och dylikt}
\index{matematik!parantes|(}
Paranteser är mycket viktiga inom matematiken för att visa olika typer av
grupper, och besitter dessutom egenskapen att de måste skalas med sin
omgivning för att de ska se bra ut. I \LaTeX{} skapar man sådana
grupper av paranteser med kommandona \cmd{left} och \cmd{right}, vilket
gör att dessa paranteser automatiskt sträcks ut för att bli lika höga som
innehållet i gruppen (vilket visas i \cref{ex:paranteser}). Man 
använder \cmd{left} och \cmd{right} genom att
sätta dit parantesen direkt efter kommandot:
\latex|\left(\frac{1}{2}\right)|

De paranteser som oftast används listas i \cref{tab:paranteser}.
Värt att notera är att \cmd{left} och \cmd{right} måste användas i par,
just eftersom de skapar en grupp. Vill man bara använda en av dem måste
man ändå sätta dit den andra på en lämplig plats, men med en punkt efter
istället för en parantes. Punkten motsvarar tomrum:
\latex|\left.\frac{1}{2}\right]|

Paranteserna måste alltså inte heller matcha typmässigt, även om detta
ofta är önskvärt:
\latex|\left(\frac{1}{2}\right]|

\index{bra-ket}
Att ha omatchade paranteser kan vara önskvärt inom till exempel
kvantfysik, där man har bra-ket-notation (se dock notisen om \cmd{mid}
på \cpageref{sec:3:mid} och paketet \pack{braket} som förklaras 
på \cpageref{pack:braket}):
\latex|\left\langle\psi\right\vert|

\begin{table}[p]
	\centering 
	\caption{Fyra vanliga parantestyper i \LaTeX.}
	\label{tab:paranteser}
	\begin{tabular}{lcp{0.6\textwidth}}
		\toprule 
		Paranteser & & Kommentar \\
		\midrule 
		\verb|\{ \}| & \(\{\quad\}\) & Används för bland annat 
		mängddefinitioner \\
		\texttt{( )} & \( (\quad) \) & \\
		\texttt{[ ]} & \( [\quad] \) & Används av vissa istället för 
		\(()\), av andra för att visa insättning av en variabel\\
		\verb|\langle| & \(\langle\quad\rangle\) &
		\multirow{2}{0.6\textwidth}{Används för att visa skalärprodukten i
		till exempel funktionsrum}\\
		\verb|\rangle| & & \\
		\bottomrule 
	\end{tabular}
\end{table}
\begin{kod}[p]
	\centering 
	\begin{minipage}{0.85\textwidth}
		\begin{latexcode}
\begin{equation*}
\int\limits_0^1\!\left(\dfrac{x^3}{3} +
x^2\right)\d{x} = \left[\dfrac{x^4}{12} +
\dfrac{x^3}{3}\right]_{x=0}^1 = \dfrac{5}{12}
\end{equation*}
		\end{latexcode}
	\end{minipage}
	\\
	\begin{equation*}
		\displaystyle\int\limits_0^1\!\left(\dfrac{x^3}{3} +
		x^2\right)\d{x} = \left[\dfrac{x^4}{12} + 
		\dfrac{x^3}{3}\right]_{x=0}^1 = \dfrac{5}{12}
	\end{equation*}
	\caption{Skalbara paranteser med \cmd{left} och \cmd{right}.}
	\label{ex:paranteser}
\end{kod}
\index{matematik!parantes|)}

\subsubsection{Vertikala streck}
\index{matematik!absolutbelopp}
Vertikala streck är mycket lika paranteser; man kan även använda dessa
genom att skriva exempelvis \cmd*{left|} och \cmd*{right|} (eller
\cmd*{left\textbackslash vert} och \cmd*{right\textbackslash vert}), om man
vill. Det
finns dock även kommandon \cmd{lvert} och \cmd{rvert} som motsvarar dessa
(och som beter sig något bättre typsättningsmässigt),
samt \cmd{lVert} och \cmd{rVert} som motsvarar dubbla vertikala streck.
Man kan således definiera både absolutbelopps- och normkommandon i \LaTeX%
\footnote{Kommandot \cmd{DeclarePairedDelimiter} definieras av paketet
\pack{mathtools}}, som sedan kan användas i matematikläget:%
\paper{a4}{\nopagebreak}% HACK(a4): ingen radbrytning här!
\begin{latexcode}
\DeclarePairedDelimiter\abs{\lvert}{\rvert}
\DeclarePairedDelimiter\norm{\lVert}{\rVert}
% ...
\( \norm{x}_1 = \sum_{i=1}^n\abs{x_i} \)
\end{latexcode}
\label{cmd:declarepaireddelimiter}

Dessutom används det vertikala strecket ibland mitt i block (exempelvis
vid definition av mängder, \(\varnothing = \{A \mid A \in A\}\)) och
betecknas då \cmd{mid}. Ett exempel med tidigare nämnda bra-ket-notation
kan se ut så här:%
\paper{a4}{\nopagebreak}% HACK(a4): ingen radbrytning här!
\label{sec:3:mid}%
\latex|\left\langle\psi\mid\Psi\right\rangle|

Dessutom kan det användas som en operator,
exempelvis för att visa insättning av en variabel som ett led i
integrering (\(\int_1^e\! x^{-1}\d{x}=\ln x\vert_{x=1}^e=1 \)) i vilket
fall man istället skriver \cmd{vert}:
\latex|\ldots=\ln x\vert_{x=1}^e=\ldots|

\subsection{Summor och integration}
\index{matematik!summa}
\index{matematik!integral}
Integraler och summor (och upprepade produkter och så vidare) är mycket
enkla att uttrycka med \LaTeX{}. Med hjälp av kommandot \cmd{sum} (eller
\cmd{int}, se även \cref{tab:sums}) kan man infoga en summa (eller
integral) utan gränser. Vill man ha en definit integral, eller en summa
med gränser, så använder man sub- och superskriptskommandona \verb|_| och
\verb|^| som tidigare diskuterats på \cpageref{sec:3:subscript}:
\latex|\sum_{x\in A}\left(\ldots\right)|

\begin{table}[tbp]
	\centering 
	\caption{Sum-, produkt- och integraltecken i \LaTeX.}
	\label{tab:sums}
	\begin{tabular}{lclclc}
		\toprule 
		
		\midrule 
		% Användning av $..$ i denna tabell motiveras av att \(..\)
		% omdefinierats med \smash{} och därför dödar tabellen.
		% \strut-hacken är bara fula.
		\cmd{sum} & $\displaystyle\sum$ & \cmd{prod} & $\displaystyle\prod$ & \cmd{coprod} & $\displaystyle\coprod$ \\
		\cmd{int} & $\displaystyle\int$ & \cmd{iint} & $\displaystyle\iint$ & \cmd{iiint} & $\displaystyle\iiint$ {\huge\strut}\\
		\cmd{iiiint} & $\displaystyle\iiiint$ & \cmd{idotsint} & $\displaystyle\idotsint$ & \cmd{oint} & $\displaystyle\oint$ {\huge\strut}\\
		\bottomrule 
	\end{tabular}
\end{table}

Detta resulterar oftast i ett korrekt resultat, med gränser över och under
tecknet då detta får plats, och med gränser likt vanliga upphöjningar och
nedsänkningar annars (till exempel i ekvationer i text, där det är ont om
plats i höjdled). Ibland gör \LaTeX dock fel. När detta händer får man
hinta \LaTeX{} om att gränserna inte typsätts korrekt med hjälp av
kommandot \cmd{limits}, som placeras mellan tecknet och gränserna:%
\paper{c5}{\nopagebreak}% HACK(c5): radbryt inte här!
\latex|\sum\limits_{x=1}^\infty \frac{1}{x^2}|

Kommandot \cmd{limits} kan även användas med andra operatorer, till
exempel \(\max\), \(\inf\) och \(\lim\):
\latex|\lim\limits_{x\to\infty} \frac{1}{x}| 

\subsubsection{Snyggare (och mer korrekta) integraler}
\index{matematik!integral}
Integraler, så som \LaTeX{} typsätter dem från början, blir ofta felaktiga
i det avseendet att avståndet mellan integraltecken och innehåll
blir stort, samtidigt som avståndet till differentieringsoperatorn
(som dessutom
inte typsätts korrekt utan visst krångel) blir för litet. Det första
problemet (som i viss mån även finns för summor) kan åtgärdas genom att
lägga in ett negativt mellanrum (\cmd{"!}) mellan integraltecken och
innehåll:
\latex|\int_0^1\! x^2 dx|

\paper{c5}{\newpage}% HACK(c5): bättre sidbrytning
Det andra problemet kan också lösas genom att lägga till mellanrum (i
kombination med att typsätta \(dx\) med \cmd{mathrm}), men eftersom
det är så ofta man behöver differentieringsoperatorn är det bättre att
definiera ett kommando för detta\footnote{Tack till
\textcite{Beaudrap11} för grunden till detta kommando.;%
Detta kommando, och en del andra användbara matematik-kommandon,
definieras även av paketet \pack{skmath} som finns tillgängligt
på CTAN.}:
\begin{latexcode}
\makeatletter
\renewcommand\d[1]{\ensuremath{%
\;\mathrm{d}#1\@ifnextchar\d{\!}{}}}
\makeatother
\end{latexcode}
\label{sec:3:integ:kod}

Med denna definition kan man mycket enklare typsätta snygga integraler med
korrekta differentieringsoperatorer, vilket \cref{ex:integral}
visar. Notera även att exemplet inte använder \cmd{iint} trots att det
handlar om en dubbelintegral; detta eftersom varje \enquote{underintegral} har
egna gränser. Integraltecknet \cmd{iint} används istället med fördel när
man ska visa integrering över exempelvis ett område \(A\), då detta bara
är \enquote{en} gräns:
\latex|\iint_A\! f(x) \d{A}|

\begin{kod}[tbp]
	\centering
			\begin{minipage}[b]{0.225\textwidth}
				\[ \int\limits_0^\infty\int\limits_0^1 f(x,y) dydx \]
			\end{minipage}
			\begin{minipage}{0.625\textwidth}
				\begin{latexcode}
\begin{equation*}
\int\limits_0^\infty
\int\limits_0^1 f(x,y) dydx
\end{equation*}
				\end{latexcode}
			\end{minipage}
	\\
			\begin{minipage}[b]{0.225\textwidth}
				\[ \int\limits_0^\infty\!\int\limits_0^1\! f(x,y) \d{y}\d{x} \]
			\end{minipage}
			\begin{minipage}{0.625\textwidth}
				\begin{latexcode}
\begin{equation*}
\int\limits_0^\infty\!
\int\limits_0^1\! f(x,y) \d{y}\d{x}
\end{equation*}
				\end{latexcode}
			\end{minipage}
	\caption[Integral med korrekt och inkorrekt typsättning]{Integral med
	korrekt (underst) och inkorrekt (överst) typsättning. Notera att 
	\cmd*{d} inte finns i \LaTeX{} från början utan måste definieras med 
	den kod som presenteras på \cpageref{sec:3:integ:kod}.}
	\label{ex:integral}
\end{kod}

\section{Ekvationsomgivningar}\label{sec:3:environments}
Redan på \cpageref{sec:3:ekvsomekv} diskuterades två av de 
ekvationsomgivningar
\AmS\LaTeX{} erbjuder (\env{equation} och \env[equation]{equation*}), och dessa två
är fullt tillräckliga för väldigt många tillämpningar. Det finns dock
tillfällen då dessa inte räcker till, och därför definierar \AmS\LaTeX{}
även en stor mängd andra omgivningar för att lösa de problem som kan 
uppstå. Det kan handla om att man har en väldigt lång ekvation som måste
brytas över flera rader, att man har flera små ekvationer som hör ihop men
som bör vara radbrutna, att man vill ha en matris eller något helt annat.

Den här introduktionen kommer bara att presentera några av de viktigaste
omgivningarna; en fullständig lista finns i användarguiden till
\pack{amsmath} \parencite{AMS99} och en ordentlig genomgång ges av
\textcite{Voss10}.

\subsection{Långa ekvationer med \env{multline}}
\index{matematikläge!radbruten ekvation}
Ibland (oroväckande ofta, till och med) stöter man på ekvationer som är
alldeles för långa för att få plats på en rad. Hamnar man i en sådan
situation är det \env{multline} (notera avsaknandet av ett \texttt{i})
man bör använda. Omgivningen typsätter matematik på flera rader, där den
första raden vänsterjusteras, sista raden högerjusteras och rader 
däremellan centreras — ett exempel kan ses i \cref{eq:multline}.

\begin{multline}\label{eq:multline}
	\int_0^\infty\!R(t)\d{t} = -3\sqrt{2\pi 
	e}\erfc\left(\frac{1}{\sqrt{2}}\right) \\
	-3e^2\sqrt{2\pi}\left(e^{5/2}\erfc\left(
	\frac{3}{\sqrt{2}}\right) - 2\erfc\left(
	\sqrt{2}\right)\right) + 2
\end{multline}

Rader separeras helt enkelt med radbrytningskommandot \verb|\\|:
\begin{latexcode}
\begin{multline}
\lim_{x\to a} \frac{f(x) - f(a)}{x - a} = \\
\ldots \\
= f'(a)
\end{multline}
\end{latexcode}

Precis som \env{equation} finns \env{multline} både med och utan stjärna,
och på exakt samma sätt har varianten utan stjärna ett ekvationsnummer,
vilket den med stjärna inte har. I övrigt finns det inga skillnader mellan
de båda. Notera att varje \env{multline}-omgivning endast får \emph{ett}
ekvationsnummer; vill man ha ett per rad ska man istället använda
\env{align}.

\subsection{Relaterade ekvationer: \env{align} och \env{gather}}
\index{matematikläge!samlade ekvationer}
Ibland kan man ha flera olika, men relaterade ekvationer man vill typsätta
i en grupp eller på rad. Detta kan man göra med två olika omgivningar:
\env{align} och \env{gather} (även dessa har stjärnvarianter utan nummer).
\Cref{fig:aligngather} visar hur dessa omgivningar ser ut; den enda
skillnaden mellan de två är att man med \env{align} kan placera ekvationer
mer exakt; \env{gather} centrerar helt enkelt bara ekvationerna.

\begin{figure}[tb]
	\centering 
	\subfloat[Tre ekvationer typsatta med \env{align}]{\fbox{ % align
		\label{fig:aligngather:align}
		\begin{minipage}{0.4\textwidth}\vspace{-1.2em}
%				\begin{subequations}
				\begin{align}
					y_1 &= x^2 + 2x + 1 \\
					y_2 &= x^2 - 2x + 1 \\
					y_3 &= x^2 - 1
				\end{align}
%				\end{subequations}
		\end{minipage}
	}}
	\quad
	\subfloat[Tre ekvationer typsatta med \env{gather}]{\fbox{ % gather
		\label{fig:aligngather:gather}
		\begin{minipage}{0.4\textwidth}\vspace{-1.2em}
			\begin{subequations}
				\begin{gather}
					y_1 = x^2 + 2x + 1 \\
					y_2 = x^2 - 2x + 1 \\
					y_3 = x^2 - 1
				\end{gather}	
			\end{subequations}
		\end{minipage}
	}}
	\caption{Relaterade ekvationer typsatta med \env{align}, \env{gather}
	och \env{subequations}.}
	\label{fig:aligngather}
\end{figure}

\paper{a4}{\newpage}% HACK(a4): bättre sidbrytning
Nya rader skapas i båda omgivningarna med nyradskommandot \verb|\\|, och
i \env{align} använder man (på liknande sätt som i \env{tabular}) ett
et-tecken (\verb|&|) för att skapa en \enquote{kolumn}. Koden för \cref{fig:aligngather:align} är således som följer:
\begin{latexcode}
\begin{align}
y_1 &= x^2 + 2x + 1 \\
y_2 &= x^2 - 2x + 1 \\
y_3 &= x^2 - 1
\end{align}
\end{latexcode}

I varianterna utan stjärna får varje rad ett eget ekvationsnummer. Detta
är helt i sin ordning; \env{align} och \env{gather} ska användas för att
gruppera ekvationer, och om man istället vill bryta upp en ekvation på
flera rader bör man använda \env{multline}. Man kan dock tvinga \LaTeX{}
att utelämna ekvationsnumret för en specifik rad genom att använda
kommandot \cmd{nonumber} precis innan man bryter raden. Man kan även
sätta en etikett på en enskild rad genom att placera \cmd{label} på samma
sätt.

\paper{a4}{\newpage}% HACK(a4): bättre sidbrytning
\subsubsection{Underekvationer}
Förutom \env{align} och \env{gather} visar även \cref{fig:aligngather:gather} hur omgivningen \env{subequations} fungerar. Denna
omgivning gör att man kan skapa \enquote{underekvationer} (likt underrubriker),
och får bara innehålla en (och endast en) matematikomgivning, inget annat:
\begin{latexcode}
\begin{subequations}
\begin{align}
y_1 &= x^2 + 2x + 1 \\
y_2 &= x^2 - 2x + 1 \\
y_3 &= x^2 - 1
\end{align}
\end{subequations}
\end{latexcode}

\subsection{Matriser}
\begin{figure}[b]
	\centering 
	\subfloat[\env{Vmatrix}]{
		\begin{minipage}{0.15\textwidth}
		\begin{equation*}
			\begin{Vmatrix}
				a & b \\
				c & d 
			\end{Vmatrix}
		\end{equation*}
		\end{minipage}
	}
	\subfloat[\env{Bmatrix}]{
		\begin{minipage}{0.15\textwidth}
		\begin{equation*}
			\begin{Bmatrix}
				a & b \\
				c & d 
			\end{Bmatrix}
		\end{equation*}
		\end{minipage}
	}
	\subfloat[\env{vmatrix}]{
		\begin{minipage}{0.15\textwidth}
		\begin{equation*}
			\begin{vmatrix}
				a & b \\
				c & d 
			\end{vmatrix}
		\end{equation*}
		\end{minipage}
	}
	\subfloat[\env{bmatrix}]{
		\begin{minipage}{0.15\textwidth}
		\begin{equation*}
			\begin{bmatrix}
				a & b \\
				c & d 
			\end{bmatrix}
		\end{equation*}
		\end{minipage}
	}
	\subfloat[\env{pmatrix}]{
		\begin{minipage}{0.15\textwidth}
		\begin{equation*}
			\begin{pmatrix}
				a & b \\
				c & d 
			\end{pmatrix}
		\end{equation*}
		\end{minipage}
	}
	\caption{Fem av de sex matristyper \AmS\LaTeX{} definierar.}
	\label{fig:matriser}
\end{figure}
\index{matematik!matris}
Matriser byggs upp på ett sätt som liknar \env{tabular}, och definieras
av de omgivningar som visas i \cref{fig:matriser}. Dessa måste
användas i matematikläge, det vill säga i en annan omgivning som används
för att typsätta matematik. Kolumner separeras med \verb|&| och
radbrytningar görs med \verb|\\|.

I stora eller repetitiva matriser (till exempel enhetsmatrisen) behöver
man inte alltid skriva ut alla element, utan istället använda notation
för upprepande element. Detta görs med hjälp av tre kommandon; 
	\cmd{cdots}, \cmd{vdots} och \cmd{ddots}, som skapar horisontella,
	vertikala och diagonala punkter vilka kan användas istället för innehåll
i kolumnerna i en matris:\label{sec:3:matrispktr}
\begin{latexcode}
\begin{equation*}
\lvert I\rvert = \begin{vmatrix}
1      & 0      & \cdots & 0      \\
0      & 1      & \cdots & 0      \\ 
\vdots & \vdots & \ddots & \vdots \\
0      & 0      & \cdots & 1
\end{vmatrix} = 1
\end{equation*}
\end{latexcode}

\subsection{Olika fall med \env{cases}}
\index{matematikläge!styckvis funktion}
Omgivningen \env{cases} är mycket användbar då man definierar styckvisa
funktioner eller vissa talföljder, till exempel den som behandlas i 
Collatz problem.
Omgivningen liknar både \env{align} och \env{matrix}-omgivningarna, men
har endast två kolumner (som dock separeras av mer mellanrum än i andra
omgivningar). \Cref{ex:cases} visar hur \env{cases} används för
att definiera en styckvis funktion (i det här fallet rampfunktionen).

\begin{kod}[b]
	\centering 
	\begin{minipage}[b]{0.35\textwidth} % figur
		\begin{equation}
			R(x) = \begin{cases}
				x, & x \geq 0; \\ 
				0, & x < 0
			\end{cases}
		\end{equation}
	\end{minipage}
	\quad
	\begin{minipage}{0.375\textwidth} % kod
		\begin{latexcode}
\begin{equation}
R(x) = \begin{cases}	
x, & x \geq 0; \\
0, & x < 0
\end{cases}
\end{equation}
		\end{latexcode}
	\end{minipage}
	\caption{Rampfunktionens definition typsatt med hjälp av \env{cases}.}
	\label{ex:cases}
\end{kod}


\section{Mellanrum} % \quad et al
\index{tomrum!i matematikläge}
Mellanrum i matematikläge ignoreras som sagt av \LaTeX, som automatiskt
sätter in korrekt mellanrum där det behövs. Normalt brukar detta bli
mycket bra, men ibland (som i fallet med integraler) kan man behöva göra
en del manuella justeringar. Detta kan man göra med de kommandon som ges
i \cref{tab:spaces}.

\begin{table}[tbp]
	\def\abox{\fbox{\phantom{z}}}
	\centering 
	\caption[De mellanrum \LaTeX{} definierar.]{De mellanrum \LaTeX{}
	 definierar. (\(\SI{1}{\mu} = \SI{1/18}{\em}\))}
	\label{tab:spaces}
	\begin{tabular}{lrc}
		\toprule
		Kommando & \si{\mu} & Exempel  \\
		\midrule 
		\cmd{negthickspace} & \(-5\) & \(\abox\negthickspace\abox\)  \\
		\cmd{negmedspace} & \(-4\) & \(\abox\negmedspace\abox\)  \\
		\cmd{"!}, \cmd{negthinspace} & \(-3\) & \(\abox\!\abox\)  \\ 
		& \(0\) & \(\abox\abox\)  \\
		\cmd{,}, \cmd{thinspace} & \(3\) & \(\abox\,\abox\)  \\
		\cmd{:}, \cmd{medspace} & \(4\) & \(\abox\:\abox\)  \\
		\cmd{;}, \cmd{thickspace} & \(5\) & \(\abox\;\abox\)  \\
		\cmd{quad} & \(18\) & \(\abox\quad\abox\)  \\
		\cmd{qquad} & \(36\) & \(\abox\qquad\abox\)  \\
		\bottomrule 
	\end{tabular}
\end{table}

Det finns både positiva (vanliga) och negativa mellanrum. De negativa
flyttar inte helt oväntat text \enquote{bakåt}, och är användbara när man till
exempel vill ångra de mellanrum \LaTeX{} lägger in.

Vilket mellanrum \LaTeX{} lägger in beror på vilken typ tecknet är och
hur omgivningen ser ut; \cref{tab:types} visar de teckentyper som
används i matematikläge samt några exempel och mängden mellanrum som
tillförs. Notera dock att tecken av typ 2 (binära operatorer) görs om till
typ 0 om de inte har någon text (en operand) till vänster.

\begin{table}[p]
	\centering 
	\caption{Avstånd före (\emph{pre}) och efter (\emph{post}) olika typer
	av tecken i matematikläge.}
	\label{tab:types}
	\begin{tabular}{lclrr}
		\toprule 
		& & & \multicolumn{2}{c}{Avst. (\si{\mu})} \\
		\cmidrule{4-5}
		Typ & & Beskrivning & Pre & Post \\
		\midrule 
		0 & \(A 0 \Phi \infty\) & Enkla tecken (\enquote{substantiv}) & 0 & 0 \\
		1 & \(\sum \prod \int\) & Prefixoperatorer & 0 & 3 \\
		2 & \(+ \cup \wedge\)   & Binära operatorer & 4 & 4 \\
		3 & \(= < \subset\)     & Jämförelse (\enquote{verb}) & 5 & 5 \\
		4 & \(( [ \{ \langle\)  & Öppnande avgränsare & 0 & 0 \\
		5 & \() ] \} \rangle\)  & Stängande avgränsare & 0 & 0 \\
		6 & \(. , ; !\)         & Postfix, punktuation & 0 & 0 \\
		\bottomrule 
	\end{tabular}
\end{table}
\begin{figure}[p]
	\centering
	\begin{minipage}{\textwidth}
		\begin{minipage}{0.4\textwidth} % ekvation
			\begin{multline}
				p(x) = \left(\frac{1}{2}x^3 + x^2 + \right. \\
				\left. x + 1 \right) = 0
			\end{multline}
		\end{minipage}
		\hfill
		\begin{minipage}{0.55\textwidth} % kod
\begin{latexcode}
\begin{multline}
p(x) = \left(\frac{1}{2}x^3 +
     x^2 + \right. \\
\left. x + 1 \right) = 0
\end{multline}
\end{latexcode}
		\end{minipage}
	\end{minipage}\\
	\begin{minipage}{\textwidth}
		\begin{minipage}{0.4\textwidth} % ekvation
			\begin{multline}
				p(x) = \left(\frac{1}{2}x^3 + x^2 + \right. \\
				\left. x + 1 \vphantom{\frac{1}{2}}\right) = 0
			\end{multline}
		\end{minipage}
		\hfill
		\begin{minipage}{0.55\textwidth} % kod
\begin{latexcode}
\begin{multline}
p(x) = \left(\frac{1}{2}x^3 +
     x^2 + \right. \\
\left. x + 1 \vphantom{
\frac{1}{2} }\right) = 0
\end{multline}
\end{latexcode}
		\end{minipage}
	\end{minipage}\\
	\caption{Problem med \env{multline} och lösningen med \cmd{vphantom}.}
	\label{fig:phantom}
\end{figure}

\subsection{Fantomer}
\index{tomrum!matematikläge}
Ibland finns det även tillfällen då man vill ha mellanrum som är
\emph{exakt} lika stora som en viss bit typsatt text. Man använder då
fantomer. De viktigaste fantomerna är \cmd{hphantom} (ingen höjd, bredd
från dess innehåll) och \cmd{vphantom} (ingen bredd, höjd från dess 
innehåll). Dessa kan vara användbara om man till exempel använder
\env{multline} för att bryta en ekvation, samtidigt som man använder
\cmd{left} och \cmd{right} (som inte fungerar \enquote{runt} radbrytningar).

\Cref{fig:phantom} illustrerar problemet och lösningen. Här använder
vi \cmd{vphantom}, eftersom vi vill lägga till höjd, och vi fyller den med
\verb|\frac{1}{2}| eftersom det är den högsta delen av gruppen vi vill
matcha.

\section{Punkter}
\index{matematik!punkter}
Även om \LaTeX{} definierar kommandon som \cmd{ldots} och \cmd{cdots} för
att typsätta punkter så bör man undvika dessa eftersom de inte berättar
vilket sammanhang punkterna används i. Det finns många olika konventioner,
och för att enkelt kunna byta mellan dessa är det bättre att använda 
\emph{semantiska} punktkommandon. \AmS\LaTeX{} definierar fem sådana
(\cref{tab:pktr}) för olika tillfällen. Använd alltid dessa om det
är möjligt!

\begin{table}[tbp]
	\centering 
	\caption{Semantiska punktkommandon definierade av \AmS\LaTeX.}
	\label{tab:pktr}
	\begin{tabular}{lcp{0.4\textwidth}}
		\toprule 
		Kommando & Exempel & Kommentar \\
		\midrule 
		\cmd{dotsc} & \(A_1,A_2,\dotsc,A_n\) & Används i anslutning till
		kommatecken, det vill säga listor och dylikt \eng{\emph{dots} with 
		\emph{c}ommas}\\ 
		\cmd{dotsb} & \(A_1+A_2+\dotsb+A_n\) & Används i anslutning till
		binära operatorer, alltså addition, subtraktion, booleska
		operatorer och så vidare \eng{\emph{dots} with \emph{b}inary 
		operators}\\ 
		\cmd{dotsm} & \(A_1 A_2 \dotsm A_n\) & Används i anslutning till
		multiplikation \eng{\emph{dots} for \emph{m}ultiplication}\\ 
		\cmd{dotsi} & \(\int_{A_1}\int_{A_2}\dotsi\int_{A_n}\) & Används
		med integraler, summor och liknande \eng{\emph{dots} with 
		\emph{i}ntegrals}\\
		\cmd{dotso} & \(A_1\dotso A_n\) & Används då inga andra punkter
		passar \eng{\emph{dots} for \emph{o}ther situations}\\
		\bottomrule 
	\end{tabular}
\end{table}

\section{Enheter med \texorpdfstring{\pack*{siunitx}}{siunitx}}\label{sec:3:siunitx}
\index{SI-enhet}
Fysiker och matematiker (främst fysiker) behöver ofta typsätta enheter i
anslutning till sin text, något som inte alltid är helt enkelt eftersom
en del konventioner existerar gällande avstånd och så vidare. Paketet
\pack{siunitx} ämnar förenkla detta genom att tillhandahålla kommandon
som till exempel \cmd{SI}.

Paketet definierar tre kommandon (\cmd{num}, \cmd{ang} och \cmd{SI}) som
används för att typsätta tal, vinklar och tal med enheter, respektive. Det
tal man vill typsätta kan även inkludera förenklande notation så som
\texttt{+-} istället för \cmd{pm}, \texttt{e} för att beteckna tiopotenser
och så vidare. Även komplexa tal stöds.

Kommandona \cmd{num} och \cmd{ang}, som inte accepterar enheter, kräver
endast ett argument medan \cmd{SI} kräver två; talet som ska typsättas
och enheten som hör till. Enheterna ges av \LaTeX-kommandon så som
\cmd{metre}, \cmd{per}, \cmd{milli} och så vidare
\parencite[en full lista ges av][\ppno~9–12]{Wright11}:
\begin{latexcode}
\num{12345,60} % Typsätter ett tal
\num{.35e100} % Typsätter ett stort tal
\num{1+-2i}   % Typsätter ett komplext tal
\ang{180}     % Typsätter en vinkel
\SI{15}{\kilogram\metre\per\second\squared} % Tal med enhet
\end{latexcode}
Dessa kommandon typsätts då sedan som
\num{12345,60}, % Typsätter ett tal
\num{.35e100}, % Typsätter ett stort tal
\num{1+-2i},   % Typsätter ett komplext tal
\ang{180} och     % Typsätter en vinkel
\SI{15}{\kilogram\metre\per\second\squared},
respektive.

Som en extra bonus löser \pack{siunitx} även, om man ställt in paketet
ordentligt, problemet med tusentals- och decimalseparatorn som \LaTeX{}
ofta ger upphov till (eftersom systemet baseras på engelska konventioner).
Detta gör man genom att använda \cmd{sisetup} för att sätta 
\texttt{locale} till \texttt{DE}\footnote{Tyska konventioner väljs 
eftersom  paketet inte innehåller inställningar för svenska, och eftersom 
tyska konventioner är mycket nära de svenska.}:
\latex|\sisetup{locale=DE}|

Paketet kan göra väldigt mycket (man kan även definiera sina egna
enheter), och det är omöjligt att gå igenom allt i en kort introduktion.
Den intresserade hänvisas till \pack{siunitx}-manualen \parencite{Wright11},
som utförligt förklarar hur paketet fungerar och vilka inställningar som
kan göras.
\end{document}
