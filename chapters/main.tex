\RequirePackage[draft]{ifdraft}
\RequirePackage{xstring,xparse}
\NewDocumentCommand\paper{mm}{\IfStrEq{\papersize}{#1}{#2}{}}
\PassOptionsToPackage{usenames,dvipsnames}{xcolor}
\PassOptionsToPackage{quiet}{fontspec}
\documentclass[lang=sv,ptsize=10pt,font=none,nomath,titles=bf]{skrapport}
%% Packages
\input{chapters/packages.tex}
%% Draft fixes to minted, tikz
\input{chapters/draft.tex}
%% FONT SELECTION
\input{chapters/fonts.tex}
%% Hacks
\input{chapters/hacks.tex}
%% Convenient definitions
\input{chapters/definitions.tex}
%% Redefinitions of style
\input{chapters/style.tex}

%% Load the bibliography data
\addbibresource{referenser.bib}

%% METADATA
\title{Att \hologo{TeX}a: en praktisk guide}
\author{Simon Sigurdhsson}
\regarding{Nybörjarguide i \hologo{LaTeX}, andra upplagan.}
\date{}

%% Actual document
\begin{document}
	%% Title page
	\subfile{chapters/meta/titlepage.tex}
	\cleardoublepage 
	%% Table of contents
	\frontmatter
	\pagestyle{thefancy}
	\tableofcontents
	\cleardoublepage
	\mainmatter
	%% INLEDNING
	\subfile{chapters/0/0.tex}
	%% GRUNDLÄGGANDE BEGREPP
	\subfile{chapters/1/1.tex}
	%% TYPSÄTTNING MED LATEX
	\subfile{chapters/2/2.tex}
	%% MATEMATIK MED LATEX OCH AMS
	\subfile{chapters/3/3.tex}
	%% GRAFIK MED LATEX
	\subfile{chapters/4/4.tex}
	%% REFERENSER MED BIBTEX
	\subfile{chapters/5/5.tex}
	%% VIDARE LÄSNING
	\subfile{chapters/6/6.tex}
	%% BIBLIOGRAFI
	\let\oldurl=\url
	\paper{a4}{\renewcommand\url[1]{\mbox{\small\oldurl{#1}}}}
	\paper{c5}{\renewcommand\url[1]{\mbox{\footnotesize\texttt{\oldurl{#1}}}}}
	\cleardoublepage
	\printbibliography
	\let\url\oldurl
	%% EN ENKEL MALL
	\appendix
	\subfile{chapters/meta/appendix.tex}
	\backmatter
\end{document}
